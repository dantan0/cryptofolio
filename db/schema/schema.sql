DROP TABLE IF EXISTS users CASCADE;

DROP TABLE IF EXISTS currency_balance CASCADE;

DROP TABLE IF EXISTS transactions CASCADE;

DROP TABLE IF EXISTS rebalance_settings CASCADE;

CREATE TABLE users (
  id SERIAL PRIMARY KEY NOT NULL,
  first_name VARCHAR(255) NOT NULL,
  username VARCHAR(255) NOT NULL,
  total_ownings INTEGER,
  email VARCHAR(255)
);

CREATE TABLE currency_balance (
  id SERIAL PRIMARY KEY NOT NULL,
  user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,
  currency_symbol VARCHAR(5),
  balance FLOAT,
  date_occured DATE
);

CREATE TABLE rebalance_settings (
  id SERIAL PRIMARY KEY NOT NULL,
  user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,
  currency_symbol VARCHAR(5),
  allocation_percent INTEGER
);


CREATE TABLE transactions (
  id SERIAL PRIMARY KEY NOT NULL,
  date_occured DATE,
  transaction_type VARCHAR(255),
  amount FLOAT,
  native_amount FLOAT,
  transaction_fee FLOAT,
  user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,
  currency_symbol VARCHAR(5)
);

insert into users (id, first_name, username, total_ownings, email) values 
(1, 'Wilt', 'nwiltshear0', 5, 'catoyo1781@heroulo.com'),
(2, 'Russo', 'drusso1', 10, 'catoyo2781@heroulo.com'),
(3, 'McMyler', 'bmcmyler2', 15, 'catoyo3781@heroulo.com'),
(4, 'Phillimore', 'ephillimore3', 43, 'catoyo4781@heroulo.com'),
(5, 'Wittock', 'kwhittock4', 12, 'catoyo5781@heroulo.com');

INSERT INTO currency_balance (user_id, currency_symbol, date_occured, balance) values 
(1, 'BTC', '2020-03-18', 0.00229664), 
(1, 'BTC', '2020-03-22', 0.00896378), 
(1, 'BTC', '2020-03-25', 0.01696845), 
(1, 'BTC', '2020-04-03', 0.01751911), 
(1, 'BTC', '2020-04-04', 0.02051033), 
(1, 'BTC', '2020-04-12', 0.02238340), 
(1, 'BTC', '2020-04-13', 0.02743324), 
(1, 'BTC', '2020-04-20', 0.03248673), 
(1, 'BTC', '2020-05-06', 0.04127442), 
(1, 'BTC', '2020-05-07', 0.05004662), 
(1, 'BTC', '2020-05-31', 0.05124282), 
(1, 'BTC', '2020-06-09', 0.05756766), 
(1, 'BTC', '2020-06-16', 0.06361871), 
(1, 'BTC', '2020-06-18', 0.06768514), 
(1, 'BTC', '2020-06-29', 0.07237164), 
(1, 'BTC', '2020-07-07', 0.07275248), 
(1, 'BTC', '2020-07-14', 0.07824928), 
(1, 'BTC', '2020-07-19', 0.08815069), 
(1, 'BTC', '2020-07-29', 0.09023378), 
(1, 'BTC', '2020-08-09', 0.09304917), 
(1, 'BTC', '2020-08-10', 0.09982501), 
(1, 'BTC', '2020-08-14', 0.10892806), 
(1, 'BTC', '2020-08-26', 0.11180629), 
(1, 'BTC', '2020-09-01', 0.11348851), 
(1, 'BTC', '2020-09-04', 0.12073802), 
(1, 'BTC', '2020-09-19', 0.12228782), 
(1, 'BTC', '2020-09-26', 0.12379585), 
(1, 'BTC', '2020-10-08', 0.12906839), 
(1, 'BTC', '2020-10-28', 0.13307531), 
(1, 'BTC', '2020-11-01', 0.13523696), 
(1, 'BTC', '2020-11-02', 0.14074456), 
(1, 'BTC', '2020-11-05', 0.14536611), 
(1, 'BTC', '2020-11-27', 0.14701546), 
(1, 'BTC', '2020-12-05', 0.14808891), 
(1, 'BTC', '2020-12-16', 0.15275368), 
(1, 'BTC', '2020-12-17', 0.15561387), 
(1, 'BTC', '2020-12-18', 0.15584967), 
(1, 'BTC', '2020-12-22', 0.15998097), 
(1, 'BTC', '2021-01-02', 0.16311826), 
(1, 'BTC', '2021-01-17', 0.16936308), 
(1, 'BTC', '2021-01-18', 0.17514544), 
(1, 'BTC', '2021-01-19', 0.17905944), 
(1, 'BTC', '2021-01-24', 0.18009981), 
(1, 'BTC', '2021-01-25', 0.18149908), 
(1, 'BTC', '2021-01-29', 0.18409306), 
(1, 'BTC', '2021-02-11', 0.18662193), 
(1, 'BTC', '2021-02-13', 0.19320202), 
(1, 'BTC', '2021-02-21', 0.19920621), 
(1, 'BTC', '2021-02-23', 0.20660164), 
(1, 'BTC', '2021-03-02', 0.2106999),
(1, 'ETH', '2020-03-22', 0.0069894),
(1, 'ETH', '2020-03-29', 0.0634660),
(1, 'ETH', '2020-03-31', 0.1584560),
(1, 'ETH', '2020-04-05', 0.2011393),
(1, 'ETH', '2020-04-07', 0.2085611),
(1, 'ETH', '2020-04-16', 0.2807117),
(1, 'ETH', '2020-04-20', 0.3614138),
(1, 'ETH', '2020-04-24', 0.4582670),
(1, 'ETH', '2020-04-25', 0.5376570),
(1, 'ETH', '2020-05-07', 0.6131634),
(1, 'ETH', '2020-05-16', 0.7051404),
(1, 'ETH', '2020-05-17', 0.7200985),
(1, 'ETH', '2020-05-23', 0.7270884),
(1, 'ETH', '2020-06-01', 0.7413529),
(1, 'ETH', '2020-06-19', 0.8170166),
(1, 'ETH', '2020-06-24', 0.8444122),
(1, 'ETH', '2020-07-05', 0.8946207),
(1, 'ETH', '2020-07-15', 0.9490973),
(1, 'ETH', '2020-07-16', 0.9726112),
(1, 'ETH', '2020-07-28', 1.0369444),
(1, 'ETH', '2020-08-06', 1.0869006),
(1, 'ETH', '2020-08-15', 1.1464626),
(1, 'ETH', '2020-08-19', 1.1699593),
(1, 'ETH', '2020-09-06', 1.1907783),
(1, 'ETH', '2020-09-13', 1.2064339),
(1, 'ETH', '2020-09-17', 1.2874725),
(1, 'ETH', '2020-09-20', 1.3739899),
(1, 'ETH', '2020-10-02', 1.3919425),
(1, 'ETH', '2020-10-07', 1.3986557),
(1, 'ETH', '2020-10-13', 1.4936388),
(1, 'ETH', '2020-10-23', 1.4989672),
(1, 'ETH', '2020-11-05', 1.5622207),
(1, 'ETH', '2020-11-08', 1.6473454),
(1, 'ETH', '2020-11-18', 1.7142447),
(1, 'ETH', '2020-12-13', 1.7376740),
(1, 'ETH', '2020-12-17', 1.7631851),
(1, 'ETH', '2020-12-24', 1.7999823),
(1, 'ETH', '2020-12-30', 1.8098921),
(1, 'ETH', '2021-01-02', 1.8908073),
(1, 'ETH', '2021-01-05', 1.9367995),
(1, 'ETH', '2021-01-06', 2.0016057),
(1, 'ETH', '2021-01-09', 2.0429346),
(1, 'ETH', '2021-01-12', 2.1161099),
(1, 'ETH', '2021-01-21', 2.1512621),
(1, 'ETH', '2021-01-25', 2.2472617),
(1, 'ETH', '2021-02-07', 2.3195180),
(1, 'ETH', '2021-02-12', 2.3508519),
(1, 'ETH', '2021-02-16', 2.4361408),
(1, 'ETH', '2021-03-05', 2.4489694),
(1, 'ETH', '2021-03-09', 2.5340970),
(1, 'LTC', '2020-03-20', 0.501795),
(1, 'LTC', '2020-03-22', 1.006049),
(1, 'LTC', '2020-03-27', 1.220865),
(1, 'LTC', '2020-04-02', 1.225913),
(1, 'LTC', '2020-04-08', 1.720657),
(1, 'LTC', '2020-04-11', 2.454852),
(1, 'LTC', '2020-04-17', 2.672243),
(1, 'LTC', '2020-05-07', 2.820606),
(1, 'LTC', '2020-05-25', 3.523166),
(1, 'LTC', '2020-05-31', 4.395983),
(1, 'LTC', '2020-06-02', 4.938423),
(1, 'LTC', '2020-06-04', 5.685054),
(1, 'LTC', '2020-06-13', 6.472247),
(1, 'LTC', '2020-07-11', 7.060488),
(1, 'LTC', '2020-07-12', 7.303256),
(1, 'LTC', '2020-07-19', 7.591169),
(1, 'LTC', '2020-07-20', 7.721827),
(1, 'LTC', '2020-07-27', 8.281959),
(1, 'LTC', '2020-08-06', 9.013304),
(1, 'LTC', '2020-08-21', 9.685865),
(1, 'LTC', '2020-08-23', 10.51157),
(1, 'LTC', '2020-08-30', 11.01961),
(1, 'LTC', '2020-09-02', 11.65026),
(1, 'LTC', '2020-09-03', 11.91325),
(1, 'LTC', '2020-09-05', 12.11189),
(1, 'LTC', '2020-09-29', 12.48497),
(1, 'LTC', '2020-10-01', 12.66494),
(1, 'LTC', '2020-10-12', 13.17288),
(1, 'LTC', '2020-10-20', 14.14840),
(1, 'LTC', '2020-10-22', 15.00952),
(1, 'LTC', '2020-10-24', 15.13072),
(1, 'LTC', '2020-11-04', 16.05361),
(1, 'LTC', '2020-11-06', 16.34519),
(1, 'LTC', '2020-11-29', 16.47109),
(1, 'LTC', '2020-11-30', 17.05266),
(1, 'LTC', '2020-12-06', 17.75410),
(1, 'LTC', '2020-12-24', 18.51944),
(1, 'LTC', '2020-12-25', 19.26009),
(1, 'LTC', '2020-12-26', 19.70475),
(1, 'LTC', '2020-12-27', 20.10342),
(1, 'LTC', '2020-12-28', 20.63332),
(1, 'LTC', '2021-01-07', 21.22340),
(1, 'LTC', '2021-01-08', 21.32082),
(1, 'LTC', '2021-01-13', 21.94450),
(1, 'LTC', '2021-01-15', 22.59032),
(1, 'LTC', '2021-02-11', 22.84016),
(1, 'LTC', '2021-02-18', 23.04135),
(1, 'LTC', '2021-02-24', 23.87890),
(1, 'LTC', '2021-03-02', 24.23873),
(1, 'LTC', '2021-03-08', 24.45655);


DROP TABLE IF EXISTS transactions CASCADE;
CREATE TABLE transactions (
  id SERIAL PRIMARY KEY NOT NULL,
  date_occured DATE,
  transaction_type VARCHAR(255),
  amount FLOAT,
  native_amount FLOAT,
  transaction_fee FLOAT,
  user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,
  currency_symbol VARCHAR(5)
);

INSERT INTO transactions (id, date_occured, transaction_type, amount, native_amount, transaction_fee, user_id, currency_symbol) values
( 1, '2021-03-24', 'Bought', 0.02, 1432.32, 5, 1, 'BTC'),
( 2, '2021-03-22', 'Bought', 0.0012, 2.70, 5, 1, 'ETH'),
( 3, '2021-03-17', 'Bought', 0.03, 7.41, 5, 1, 'LTC'),
( 4, '2021-03-15', 'Bought', 0.03, 7.1, 5.05, 1, 'LTC'),
( 5, '2021-03-05', 'Bought', 0.01, 720.86, 5.05, 1, 'BTC'),
( 6, '2021-03-04', 'Bought', 0.005, 350.32, 5, 1, 'BTC'),
( 7, '2021-02-25', 'Bought', 0.003, 0.74, 5, 1, 'LTC'),
( 8, '2021-02-25', 'Sold', 100, 70.9, 5, 1, 'NU'),
( 19, '2021-01-08', 'Bought', 0.00600000, 13.52, 5, 1, 'ETH'),
( 10, '2021-01-02', 'Bought', 0.002, 144.17, 5, 1, 'BTC'),
( 11, '2020-12-14', 'Sold', 3, 2.50, 5, 1, 'NU')